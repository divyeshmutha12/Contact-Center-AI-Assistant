{
    "agent_activity": {
        "description": "Agent Activity Report - Shows agent login times, call durations, break details, and performance metrics",
        "use_current_date_default": true,
        "parameters": {
            "start_date": "{{CURRENT_DATE_START}}",
            "end_date": "{{CURRENT_DATE_END}}",
            "sme_id": 20002124
        },
        "query": "SELECT ROW_NUMBER() OVER (ORDER BY ad.agent_name) AS 'Order Number', ad.agent_name AS 'Agent Name', ad1.agent_name AS 'Team Lead Name', acd.wrap_up_time AS 'Wrap Up Time', ad.agent_id AS 'Agent ID', ad.in_time AS 'In Time', ad.current_call_mode AS 'Current Call Mode', ad.out_time AS 'Out Time', ad.break_status AS 'Break Status', ad.call_status AS 'Call Status', ad.agent_login_type AS 'Login Type', adt.in_time AS 'Shift Start Time', adt.out_time AS 'Shift End Time', COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) AS 'Date', COALESCE(SUM(acd.dialer_on_off_duration), 0) AS 'Dialer On Off Duration', COALESCE(SUM(acd.office_hours), 0) AS 'Office Hours', COALESCE(SUM(acd.lunch_hours), 0) AS 'Lunch Hours', COALESCE(SUM(acd.total_number_of_breaks), 0) AS 'Total Number of Breaks', COALESCE(SUM(acd.hold_time), 0) AS 'Total Hold Time', COALESCE(SUM(acd.mute_time), 0) AS 'Total Mute Time', COALESCE(SUM(acd.total_call_duration), 0) AS 'Total Call Duration', IFNULL(TIME_TO_SEC(TIMEDIFF(TIME(NOW()), TIME(u.logged_in_time))), 0) AS 'Current Logged Time Sec', (COALESCE(SUM(acd.office_hours), 0) + IFNULL(TIME_TO_SEC(TIMEDIFF(TIME((NOW())), TIME(u.logged_in_time))), 0)) AS 'Total Logged In Duration', DATE_FORMAT(lh.first_login_time, '%H:%i:%s') AS 'First Login Time', DATE_FORMAT(lh.last_logout_time, '%H:%i:%s') AS 'Last Logout Time', lh.last_logout_reason AS 'Last Logout Reason' FROM agent_details ad LEFT JOIN agent_details ad1 ON ad1.agent_id = ad.reporting_to LEFT JOIN agent_details_timing adt ON adt.agent_id = ad.agent_id AND adt.days_week = UPPER(DATE_FORMAT(CONVERT_TZ(NOW(), '+0:00', '+5:30'),'%a')) LEFT JOIN agent_calling_details acd ON acd.agent_id = ad.agent_id AND Date(acd.insert_date) BETWEEN Date(CONVERT_TZ('{{start_date}}', '+0:00', '+5:30')) AND Date(CONVERT_TZ('{{end_date}}', '+0:00', '+5:30')) LEFT JOIN users u ON u.username = ad.agent_email AND u.logged_out_time IS NULL LEFT JOIN (SELECT l.agent_id, l.sme_id, DATE(l.insert_date_time) AS log_date, MIN(CASE WHEN ACTION = 'login' THEN l.insert_date_time END) AS first_login_time, MAX(CASE WHEN ACTION = 'logout' THEN l.insert_date_time END) AS last_logout_time, (SELECT l2.message FROM log_history l2 WHERE l2.agent_id = l.agent_id AND l2.sme_id = l.sme_id AND l2.action = 'logout' AND DATE(l2.insert_date_time) = DATE(l.insert_date_time) ORDER BY l2.insert_date_time DESC LIMIT 1) AS last_logout_reason FROM log_history l WHERE l.insert_date_time BETWEEN '{{start_date}}' AND '{{end_date}}' GROUP BY l.agent_id, l.sme_id, DATE(l.insert_date_time)) lh ON lh.agent_id = ad.agent_id AND lh.sme_id = ad.sme_id AND lh.log_date = COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) WHERE ad.sme_id = {{sme_id}} AND (CASE WHEN ad.agent_login_type = 'fixed_schedule' AND adt.days_week = UPPER(DATE_FORMAT(NOW(), '%a')) THEN TIME(CONVERT_TZ(NOW(), '+0:00', '+5:30')) BETWEEN TIME(CONVERT_TZ(adt.in_time, '+0:00', '+5:30')) AND TIME(CONVERT_TZ(adt.out_time, '+0:00', '+5:30')) WHEN ad.agent_login_type = 'self_sign_in' THEN (lh.first_login_time IS NOT NULL AND u.logged_out_time IS NULL) END) GROUP BY ad.agent_id, COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) ORDER BY ad.agent_name, COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30')))"
    },
    "agent_status_report": {
        "description": "Agent Status Report - Real-time agent status with login times, call durations, break details, and performance metrics",
        "use_current_date_default": true,
        "parameters": {
            "start_date": "{{CURRENT_DATE_START}}",
            "end_date": "{{CURRENT_DATE_END}}",
            "sme_id": 20002124
        },
        "query": "SELECT ROW_NUMBER() OVER (ORDER BY ad.agent_name) AS 'Order Number', ad.agent_name AS 'Agent Name', ad1.agent_name AS 'Team Lead Name', acd.wrap_up_time AS 'Wrap Up Time', ad.agent_id AS 'Agent ID', ad.in_time AS 'In Time', ad.current_call_mode AS 'Current Call Mode', ad.out_time AS 'Out Time', ad.break_status AS 'Break Status', ad.call_status AS 'Call Status', ad.agent_login_type AS 'Login Type', adt.in_time AS 'Shift Start Time', adt.out_time AS 'Shift End Time', COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) AS 'Date', COALESCE(SUM(acd.dialer_on_off_duration), 0) AS 'Dialer On Off Duration', COALESCE(SUM(acd.office_hours), 0) AS 'Office Hours', COALESCE(SUM(acd.lunch_hours), 0) AS 'Lunch Hours', COALESCE(SUM(acd.total_number_of_breaks), 0) AS 'Total Number of Breaks', COALESCE(SUM(acd.hold_time), 0) AS 'Total Hold Time', COALESCE(SUM(acd.mute_time), 0) AS 'Total Mute Time', COALESCE(SUM(acd.total_call_duration), 0) AS 'Total Call Duration', IFNULL(TIME_TO_SEC(TIMEDIFF(TIME(NOW()), TIME(u.logged_in_time))), 0) AS 'Current Logged Time Sec', (COALESCE(SUM(acd.office_hours), 0) + IFNULL(TIME_TO_SEC(TIMEDIFF(TIME((NOW())), TIME(u.logged_in_time))), 0)) AS 'Total Logged In Duration', DATE_FORMAT(lh.first_login_time, '%H:%i:%s') AS 'First Login Time', DATE_FORMAT(lh.last_logout_time, '%H:%i:%s') AS 'Last Logout Time', lh.last_logout_reason AS 'Last Logout Reason' FROM agent_details ad LEFT JOIN agent_details ad1 ON ad1.agent_id = ad.reporting_to LEFT JOIN agent_details_timing adt ON adt.agent_id = ad.agent_id AND adt.days_week = UPPER(DATE_FORMAT(CONVERT_TZ(NOW(), '+0:00', '+5:30'),'%a')) LEFT JOIN agent_calling_details acd ON acd.agent_id = ad.agent_id AND Date(acd.insert_date) BETWEEN Date(CONVERT_TZ('{{start_date}}', '+0:00', '+5:30')) AND Date(CONVERT_TZ('{{end_date}}', '+0:00', '+5:30')) LEFT JOIN users u ON u.username = ad.agent_email AND u.logged_out_time IS NULL LEFT JOIN (SELECT l.agent_id, l.sme_id, DATE(l.insert_date_time) AS log_date, MIN(CASE WHEN ACTION = 'login' THEN l.insert_date_time END) AS first_login_time, MAX(CASE WHEN ACTION = 'logout' THEN l.insert_date_time END) AS last_logout_time, (SELECT l2.message FROM log_history l2 WHERE l2.agent_id = l.agent_id AND l2.sme_id = l.sme_id AND l2.action = 'logout' AND DATE(l2.insert_date_time) = DATE(l.insert_date_time) ORDER BY l2.insert_date_time DESC LIMIT 1) AS last_logout_reason FROM log_history l WHERE l.insert_date_time BETWEEN '{{start_date}}' AND '{{end_date}}' GROUP BY l.agent_id, l.sme_id, DATE(l.insert_date_time)) lh ON lh.agent_id = ad.agent_id AND lh.sme_id = ad.sme_id AND lh.log_date = COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) WHERE ad.sme_id = {{sme_id}} AND (CASE WHEN ad.agent_login_type = 'fixed_schedule' AND adt.days_week = UPPER(DATE_FORMAT(NOW(), '%a')) THEN TIME(CONVERT_TZ(NOW(), '+0:00', '+5:30')) BETWEEN TIME(CONVERT_TZ(adt.in_time, '+0:00', '+5:30')) AND TIME(CONVERT_TZ(adt.out_time, '+0:00', '+5:30')) WHEN ad.agent_login_type = 'self_sign_in' THEN (lh.first_login_time IS NOT NULL AND u.logged_out_time IS NULL) END) GROUP BY ad.agent_id, COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30'))) ORDER BY ad.agent_name, COALESCE(DATE(acd.insert_date), DATE(CONVERT_TZ(NOW(), '+0:00', '+5:30')))"
    },
    "sms_report": {
        "description": "SMS Report - Shows SMS triggered by agents with success/failure counts grouped by agent, date, campaign, and type",
        "use_current_date_default": true,
        "parameters": {
            "start_date": "{{CURRENT_DATE_START}}",
            "end_date": "{{CURRENT_DATE_END}}"
        },
        "query": "SELECT agentName AS 'Agent Name', DATE(dateTime) AS 'Date', COALESCE(NULLIF(campaign_name, ''), 'N/A') AS 'Campaign Name', COUNT(*) AS 'Total SMS Triggered', SUM(CASE WHEN status >= 200 AND status < 300 THEN 1 ELSE 0 END) AS 'SMS Submitted Successfully', SUM(CASE WHEN status IS NOT NULL AND (status < 200 OR status >= 300) THEN 1 ELSE 0 END) AS 'SMS Failed to Submit', type AS 'SMS State' FROM smeReport WHERE dateTime BETWEEN '{{start_date}}' AND '{{end_date}}' GROUP BY agentName, DATE(dateTime), campaign_name, type ORDER BY DATE(dateTime) DESC, agentName, campaign_name, type"
    },
    "whatsapp_report": {
        "description": "WhatsApp Report - Shows WhatsApp messages triggered by agents with success/failure counts grouped by agent, date, campaign, and type",
        "use_current_date_default": true,
        "parameters": {
            "start_date": "{{CURRENT_DATE_START}}",
            "end_date": "{{CURRENT_DATE_END}}"
        },
        "query": "SELECT agentName AS 'Agent Name', DATE(dateTime) AS 'Date', COALESCE(NULLIF(campaign_name, ''), 'N/A') AS 'Campaign Name', COUNT(*) AS 'Total WhatsApp Msg Triggered', SUM(CASE WHEN status >= 200 AND status < 300 THEN 1 ELSE 0 END) AS 'WhatsApp Message Submitted Successfully', SUM(CASE WHEN status IS NOT NULL AND (status < 200 OR status >= 300) THEN 1 ELSE 0 END) AS 'WhatsApp Message Failed to Submit', type AS 'Whatsapp State' FROM whatsAppReport WHERE dateTime BETWEEN '{{start_date}}' AND '{{end_date}}' GROUP BY agentName, DATE(dateTime), campaign_name, type ORDER BY DATE(dateTime) DESC, agentName, campaign_name, type"
    }
}
